<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Welcome, {{ currentUser?.name || 'User' }}</h1>
    <p class="subtitle">{{ welcomeMessage }}</p>
  </header>

  <!-- TA Proctoring Calendar -->
  <app-ta-proctoring-calendar *ngIf="currentUser?.role === 'ta'"></app-ta-proctoring-calendar>

  <div class="dashboard-overview">
    <div class="overview-cards">
      <div class="stat-card">
        <div class="stat-icon">
          <app-icon icon="people" size="large"></app-icon>
        </div>
        <div class="stat-content">
          <h3>Total TAs</h3>
          <p class="stat-value">{{ stats.taCount }}</p>
          <p class="stat-change" [class.positive]="stats.taChange > 0" [class.negative]="stats.taChange < 0">
            <span *ngIf="stats.taChange > 0">+{{ stats.taChange }}</span>
            <span *ngIf="stats.taChange < 0">{{ stats.taChange }}</span>
            <span *ngIf="stats.taChange === 0">No change</span>
          </p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <app-icon icon="book" size="large"></app-icon>
        </div>
        <div class="stat-content">
          <h3>Courses</h3>
          <p class="stat-value">{{ stats.courseCount }}</p>
          <p class="stat-context">{{ stats.activeCourseCount }} active this semester</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <app-icon icon="workload" size="large"></app-icon>
        </div>
        <div class="stat-content">
          <h3>Workload Status</h3>
          <p class="stat-value">{{ stats.avgWorkload }}h</p>
          <p class="stat-context">average per TA</p>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard-grid">
    <div class="card" *ngIf="currentUser?.role === 'ta'">
      <div class="card-header">
        <h2>Workload Management</h2>
      </div>
      <p>Log and manage TA workload entries</p>
      <div class="card-actions">
        <a routerLink="/workload/add" class="btn btn-primary" *ngIf="currentUser?.role === 'ta'">Log Hours</a>
        <a routerLink="/workload/instructor" class="btn btn-outline" *ngIf="currentUser?.role === 'instructor'">Review Entries</a>
        <a routerLink="/workload/view" class="btn btn-outline" *ngIf="currentUser?.role === 'ta'">View My Hours</a>
      </div>
    </div>

    <div class="card" *ngIf="currentUser?.role === 'instructor'">
      <div class="card-header">
        <h2>Workload Review</h2>
        <span class="card-badge">{{ stats.pendingWorkloadCount }}</span>
      </div>
      <p>Review and approve TA workload submissions</p>
      <div class="card-actions">
        <a routerLink="/workload/instructor" class="btn btn-primary">Review Entries</a>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h2>Exam Management</h2>
        <span class="card-badge">{{ stats.examCount || 0 }}</span>
      </div>
      <p>Schedule exams and manage proctoring assignments</p>
      <div class="card-actions">
        <a routerLink="/proctoring" class="btn btn-primary">View Exams</a>
        <a *ngIf="canManageExams()" routerLink="/proctoring/new" class="btn btn-outline">Schedule Exam</a>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h2>Performance Reports</h2>
        <span class="card-badge">{{ stats.reportCount }}</span>
      </div>
      <p>Generate reports on TA workload and performance</p>
      <div class="card-actions">
        <a routerLink="/performance-reports" class="btn btn-primary">View Reports</a>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h2>Leave Management</h2>
        <span class="card-badge">{{ stats.leaveRequestCount || 0 }}</span>
      </div>
      <p>{{ authService.isTA ? 'Submit leave requests and check approval status' : 'View and manage TA leave requests' }}</p>
      <div class="card-actions">
        <a routerLink="/leave-requests" class="btn btn-primary">View Requests</a>
        <a routerLink="/leave-requests/new" class="btn btn-outline" *ngIf="authService.isTA">Request Leave</a>
      </div>
    </div>
  </div>

  <!-- Management Section -->
  <div class="management-section" *ngIf="isAdminView">
    <h2 class="section-title">System Management</h2>
    <div class="management-grid">
      <!-- TA Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>TA Management</h3>
        </div>
        <p>Manage teaching assistants and their assignments</p>
        <div class="card-actions">
          <a routerLink="/tas" class="btn btn-primary">Manage TAs</a>
        </div>
      </div>

      <!-- Course Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>Course Management</h3>
        </div>
        <p>Add, edit or remove courses and their details</p>
        <div class="card-actions">
          <a routerLink="/courses" class="btn btn-primary">Manage Courses</a>
        </div>
      </div>

      <!-- Instructor Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>Instructor Management</h3>
        </div>
        <p>Manage instructor accounts and information</p>
        <div class="card-actions">
          <a routerLink="/instructors" class="btn btn-primary">Manage Instructors</a>
        </div>
      </div>

      <!-- Deans Office Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>Deans Office Management</h3>
        </div>
        <p>Manage deans office staff accounts</p>
        <div class="card-actions">
          <a routerLink="/deansoffice" class="btn btn-primary">Manage Staff</a>
        </div>
      </div>

      <!-- Department Chair Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>Department Chair Management</h3>
        </div>
        <p>Manage department chair accounts</p>
        <div class="card-actions">
          <a routerLink="/departmentchairs" class="btn btn-primary">Manage Chairs</a>
        </div>
      </div>

      <!-- Classroom Management Card -->
      <div class="card" *ngIf="currentUser?.role === 'authstaff'">
        <div class="card-header">
          <h3>Classroom Management</h3>
        </div>
        <p>Manage classroom information and capacity</p>
        <div class="card-actions">
          <a routerLink="/classrooms" class="btn btn-primary">Manage Classrooms</a>
        </div>
      </div>
    </div>
  </div>
</div>
